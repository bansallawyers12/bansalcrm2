(async function(){typeof window.vendorLibsReady<"u"?(await window.vendorLibsReady,console.log("Vendor libraries ready, initializing components...")):await new Promise(l=>{const d=()=>{typeof window.$<"u"&&typeof window.$.fn.select2=="function"&&typeof window.intlTelInput=="function"?l():setTimeout(d,50)};d()});function n(){$(document).ready(function(){$(".tel_input").on("blur",function(){this.value=this.value}),typeof $.fn.select2<"u"&&$(".assineeselect2").select2({dropdownParent:$("#checkinmodal")}),$(document).delegate(".opencheckin","click",function(){$("#checkinmodal").modal("show")}),$(document).delegate(".visitpurpose","blur",function(){var t=$(this).val(),e=$(this).attr("data-id");$(".popuploader").show(),$.ajax({url:site_url+"/admin/update_visit_purpose",type:"POST",data:{id:e,visit_purpose:t},success:function(a){$.ajax({url:site_url+"/admin/get-checkin-detail",type:"GET",data:{id:e},success:function(i){$(".popuploader").hide(),$(".showchecindetail").html(i)}})}})}),$(document).delegate(".savevisitcomment","click",function(){var t=$(".visit_comment").val(),e=$(this).attr("data-id");$(".popuploader").show(),$.ajax({url:site_url+"/admin/update_visit_comment",type:"POST",data:{id:e,visit_comment:t},success:function(a){$(".visit_comment").val(""),$.ajax({url:site_url+"/admin/get-checkin-detail",type:"GET",data:{id:e},success:function(i){$(".popuploader").hide(),$(".showchecindetail").html(i)}})}})}),$(document).delegate(".attendsession","click",function(){var t=$(this).attr("data-id");$(".popuploader").show(),$.ajax({url:site_url+"/admin/attend_session",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:t,waitcountdata:$("#waitcountdata").val()},success:function(e){var a=$.parseJSON(e);a.status?($.ajax({url:site_url+"/admin/get-checkin-detail",type:"GET",data:{id:t},success:function(i){$(".popuploader").hide(),$(".showchecindetail").html(i)}}),$(".checindata #id_"+t).remove()):alert(a.message)}})}),$(document).delegate(".completesession","click",function(){var t=$(this).attr("data-id"),e=$("#attendcountdata").val();console.log("Complete Session clicked - ID:",t,"Attend Count:",e),$(".popuploader").show(),$.ajax({url:site_url+"/admin/complete_session",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:t,attendcountdata:e},success:function(a){console.log("Complete Session Response:",a);try{var i=$.parseJSON(a);i.status?($.ajax({url:site_url+"/admin/get-checkin-detail",type:"GET",data:{id:t},success:function(o){$(".popuploader").hide(),$(".showchecindetail").html(o),alert("Session completed successfully!")},error:function(o,s,r){$(".popuploader").hide(),console.error("Error fetching checkin detail:",r),alert("Session completed but failed to refresh details.")}}),$(".checindata #id_"+t).remove()):($(".popuploader").hide(),alert(i.message))}catch(o){$(".popuploader").hide(),console.error("Error parsing response:",o),alert("Error processing response")}},error:function(a,i,o){$(".popuploader").hide(),console.error("AJAX Error:",{xhr:a,status:i,error:o}),alert("Failed to complete session. Error: "+o+`
Status: `+a.status+`
Response: `+a.responseText)}})}),$(document).delegate(".opencheckindetail","click",function(){$("#checkindetailmodal").modal("show"),$(".popuploader").show();var t=$(this).attr("id");$.ajax({url:site_url+"/admin/get-checkin-detail",type:"GET",data:{id:t},success:function(e){$(".popuploader").hide(),$(".showchecindetail").html(e)}})}),typeof window.intlTelInput=="function"?$(".telephone").each(function(){try{window.intlTelInput(this)}catch(t){console.warn("Error initializing intlTelInput:",t)}}):console.warn("intlTelInput not available"),$(".drop_table_data button").on("click",function(){$(".client_dropdown_list").toggleClass("active")}),$(".client_dropdown_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".client_table_data table tr td").show(),$(".client_table_data table tr th").show(),$(".client_dropdown_list label.dropdown-option input").prop("checked",!0)):($(".client_dropdown_list label.dropdown-option input").prop("checked",!1),$(".client_table_data table tr td").hide(),$(".client_table_data table tr th").hide(),$(".client_table_data table tr td:nth-child(1)").show(),$(".client_table_data table tr th:nth-child(1)").show(),$(".client_table_data table tr td:nth-child(2)").show(),$(".client_table_data table tr th:nth-child(2)").show(),$(".client_table_data table tr td:nth-child(17)").show(),$(".client_table_data table tr th:nth-child(17)").show()):$(this).is(":checked")?($(".client_table_data table tr td:nth-child("+t+")").show(),$(".client_table_data table tr th:nth-child("+t+")").show()):($(".client_dropdown_list label.dropdown-option.all input").prop("checked",!1),$(".client_table_data table tr td:nth-child("+t+")").hide(),$(".client_table_data table tr th:nth-child("+t+")").hide())}),$(".student_drop_table_data button").on("click",function(){$(".student_dropdown_list").toggleClass("active")}),$(".student_dropdown_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".student_table_data table tr td").show(),$(".student_table_data table tr th").show(),$(".student_dropdown_list label.dropdown-option input").prop("checked",!0)):($(".student_dropdown_list label.dropdown-option input").prop("checked",!1),$(".student_table_data table tr td").hide(),$(".student_table_data table tr th").hide(),$(".student_table_data table tr td:nth-child(1)").show(),$(".student_table_data table tr th:nth-child(1)").show(),$(".student_table_data table tr td:nth-child(2)").show(),$(".student_table_data table tr th:nth-child(2)").show(),$(".student_table_data table tr td:nth-child(22)").show(),$(".student_table_data table tr th:nth-child(22)").show()):$(this).is(":checked")?($(".student_table_data table tr td:nth-child("+t+")").show(),$(".student_table_data table tr th:nth-child("+t+")").show()):($(".student_dropdown_list label.dropdown-option.all input").prop("checked",!1),$(".student_table_data table tr td:nth-child("+t+")").hide(),$(".student_table_data table tr th:nth-child("+t+")").hide())}),$(".student_drop_table_data1 button").on("click",function(){$(".student_dropdown_list1").toggleClass("active")}),$(".student_dropdown_list1 label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".student_table_data1 table tr td").show(),$(".student_table_data1 table tr th").show(),$(".student_dropdown_list1 label.dropdown-option input").prop("checked",!0)):($(".student_dropdown_list1 label.dropdown-option input").prop("checked",!1),$(".student_table_data1 table tr td").hide(),$(".student_table_data1 table tr th").hide(),$(".student_table_data1 table tr td:nth-child(1)").show(),$(".student_table_data1 table tr th:nth-child(1)").show(),$(".student_table_data1 table tr td:nth-child(2)").show(),$(".student_table_data1 table tr th:nth-child(2)").show(),$(".student_table_data1 table tr td:nth-child(22)").show(),$(".student_table_data1 table tr th:nth-child(22)").show()):$(this).is(":checked")?($(".student_table_data1 table tr td:nth-child("+t+")").show(),$(".student_table_data1 table tr th:nth-child("+t+")").show()):($(".student_dropdown_list1 label.dropdown-option.all input").prop("checked",!1),$(".student_table_data1 table tr td:nth-child("+t+")").hide(),$(".student_table_data1 table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".client_report_list").toggleClass("active")}),$(".client_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".client_report_data table tr td").show(),$(".client_report_data table tr th").show(),$(".client_report_list label.dropdown-option input").prop("checked",!0)):($(".client_report_list label.dropdown-option input").prop("checked",!1),$(".client_report_data table tr td").hide(),$(".client_report_data table tr th").hide(),$(".client_report_data table tr td:nth-child(1)").show(),$(".client_report_data table tr th:nth-child(1)").show(),$(".client_report_data table tr td:nth-child(2)").show(),$(".client_report_data table tr th:nth-child(2)").show(),$(".client_report_data table tr td:nth-child(11)").show(),$(".client_report_data table tr th:nth-child(11)").show()):$(this).is(":checked")?($(".client_report_data table tr td:nth-child("+t+")").show(),$(".client_report_data table tr th:nth-child("+t+")").show()):($(".client_report_list label.dropdown-option.all input").prop("checked",!1),$(".client_report_data table tr td:nth-child("+t+")").hide(),$(".client_report_data table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".application_report_list").toggleClass("active")}),$(".application_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".application_report_data table tr td").show(),$(".application_report_data table tr th").show(),$(".application_report_list label.dropdown-option input").prop("checked",!0)):($(".application_report_list label.dropdown-option input").prop("checked",!1),$(".application_report_data table tr td").hide(),$(".application_report_data table tr th").hide(),$(".application_report_data table tr td:nth-child(1)").show(),$(".application_report_data table tr th:nth-child(1)").show(),$(".application_report_data table tr td:nth-child(2)").show(),$(".application_report_data table tr th:nth-child(2)").show(),$(".application_report_data table tr td:nth-child(3)").show(),$(".application_report_data table tr th:nth-child(3)").show(),$(".application_report_data table tr td:nth-child(5)").show(),$(".application_report_data table tr th:nth-child(5)").show(),$(".application_report_data table tr td:nth-child(7)").show(),$(".application_report_data table tr th:nth-child(7)").show()):$(this).is(":checked")?($(".application_report_data table tr td:nth-child("+t+")").show(),$(".application_report_data table tr th:nth-child("+t+")").show()):($(".application_report_list label.dropdown-option.all input").prop("checked",!1),$(".application_report_data table tr td:nth-child("+t+")").hide(),$(".application_report_data table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".officevisit_report_list").toggleClass("active")}),$(".officevisit_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".officevisit_report_data table tr td").show(),$(".officevisit_report_data table tr th").show(),$(".officevisit_report_list label.dropdown-option input").prop("checked",!0)):($(".officevisit_report_list label.dropdown-option input").prop("checked",!1),$(".officevisit_report_data table tr td").hide(),$(".officevisit_report_data table tr th").hide(),$(".officevisit_report_data table tr td:nth-child(1)").show(),$(".officevisit_report_data table tr th:nth-child(1)").show(),$(".officevisit_report_data table tr td:nth-child(2)").show(),$(".officevisit_report_data table tr th:nth-child(2)").show(),$(".officevisit_report_data table tr td:nth-child(4)").show(),$(".officevisit_report_data table tr th:nth-child(4)").show()):$(this).is(":checked")?($(".officevisit_report_data table tr td:nth-child("+t+")").show(),$(".officevisit_report_data table tr th:nth-child("+t+")").show()):($(".officevisit_report_list label.dropdown-option.all input").prop("checked",!1),$(".officevisit_report_data table tr td:nth-child("+t+")").hide(),$(".officevisit_report_data table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".invoice_report_list").toggleClass("active")}),$(".invoice_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".invoice_report_data table tr td").show(),$(".invoice_report_data table tr th").show(),$(".invoice_report_list label.dropdown-option input").prop("checked",!0)):($(".invoice_report_list label.dropdown-option input").prop("checked",!1),$(".invoice_report_data table tr td").hide(),$(".invoice_report_data table tr th").hide(),$(".invoice_report_data table tr td:nth-child(1)").show(),$(".invoice_report_data table tr th:nth-child(1)").show(),$(".invoice_report_data table tr td:nth-child(2)").show(),$(".invoice_report_data table tr th:nth-child(2)").show(),$(".invoice_report_data table tr td:nth-child(4)").show(),$(".invoice_report_data table tr th:nth-child(4)").show()):$(this).is(":checked")?($(".invoice_report_data table tr td:nth-child("+t+")").show(),$(".invoice_report_data table tr th:nth-child("+t+")").show()):($(".invoice_report_list label.dropdown-option.all input").prop("checked",!1),$(".invoice_report_data table tr td:nth-child("+t+")").hide(),$(".invoice_report_data table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".saleforecast_applic_report_list").toggleClass("active")}),$(".saleforecast_applic_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".saleforecast_application_report_data table tr td").show(),$(".saleforecast_application_report_data table tr th").show(),$(".saleforecast_applic_report_list label.dropdown-option input").prop("checked",!0)):($(".saleforecast_applic_report_list label.dropdown-option input").prop("checked",!1),$(".saleforecast_application_report_data table tr td").hide(),$(".saleforecast_application_report_data table tr th").hide(),$(".saleforecast_application_report_data table tr td:nth-child(1)").show(),$(".saleforecast_application_report_data table tr th:nth-child(1)").show(),$(".saleforecast_application_report_data table tr td:nth-child(2)").show(),$(".saleforecast_application_report_data table tr th:nth-child(2)").show(),$(".saleforecast_application_report_data table tr td:nth-child(4)").show(),$(".saleforecast_application_report_data table tr th:nth-child(4)").show()):$(this).is(":checked")?($(".saleforecast_application_report_data table tr td:nth-child("+t+")").show(),$(".saleforecast_application_report_data table tr th:nth-child("+t+")").show()):($(".saleforecast_applic_report_list label.dropdown-option.all input").prop("checked",!1),$(".saleforecast_application_report_data table tr td:nth-child("+t+")").hide(),$(".saleforecast_application_report_data table tr th:nth-child("+t+")").hide())}),$(".drop_table_data button").on("click",function(){$(".interest_service_report_list").toggleClass("active")}),$(".interest_service_report_list label.dropdown-option input").on("click",function(){var t=$(this).val();t=="all"?$(this).is(":checked")?($(".interest_service_report_data table tr td").show(),$(".interest_service_report_data table tr th").show(),$(".interest_service_report_list label.dropdown-option input").prop("checked",!0)):($(".interest_service_report_list label.dropdown-option input").prop("checked",!1),$(".interest_service_report_data table tr td").hide(),$(".interest_service_report_data table tr th").hide(),$(".interest_service_report_data table tr td:nth-child(1)").show(),$(".interest_service_report_data table tr th:nth-child(1)").show(),$(".interest_service_report_data table tr td:nth-child(2)").show(),$(".interest_service_report_data table tr th:nth-child(2)").show(),$(".interest_service_report_data table tr td:nth-child(10)").show(),$(".interest_service_report_data table tr th:nth-child(10)").show(),$(".interest_service_report_data table tr td:nth-child(14)").show(),$(".interest_service_report_data table tr th:nth-child(14)").show()):$(this).is(":checked")?($(".interest_service_report_data table tr td:nth-child("+t+")").show(),$(".interest_service_report_data table tr th:nth-child("+t+")").show()):($(".interest_service_report_list label.dropdown-option.all input").prop("checked",!1),$(".interest_service_report_data table tr td:nth-child("+t+")").hide(),$(".interest_service_report_data table tr th:nth-child("+t+")").hide())}),$("#personal_details .is_business").hide(),$("#office_income_share .is_super_agent").hide(),$("#office_income_share .is_sub_agent").hide(),$(".modal-body form#addgroupinvoice .is_superagentinv").hide(),$('#agentstructure input[name="struture"]').on("change",function(){var t=$(this).attr("id");t=="individual"?($("#personal_details .is_business").hide(),$("#personal_details .is_individual").show(),$("#personal_details .is_business input").attr("data-valid",""),$("#personal_details .is_individual input").attr("data-valid","required")):($("#personal_details .is_individual").hide(),$("#personal_details .is_business").show(),$("#personal_details .is_business input").attr("data-valid","required"),$("#personal_details .is_individual input").attr("data-valid",""))}),$('.modal-body form#addgroupinvoice input[name="partner_type"]').on("change",function(){var t=$(this).attr("id");t=="superagent_inv"?($(".modal-body form#addgroupinvoice .is_partnerinv").hide(),$(".modal-body form#addgroupinvoice .is_superagentinv").show(),$(".modal-body form#addgroupinvoice .is_partnerinv input").attr("data-valid",""),$(".modal-body form#addgroupinvoice .is_superagentinv input").attr("data-valid","required")):($(".modal-body form#addgroupinvoice .is_superagentinv").hide(),$(".modal-body form#addgroupinvoice .is_partnerinv").show(),$(".modal-body form#addgroupinvoice .is_partnerinv input").attr("data-valid","required"),$(".modal-body form#addgroupinvoice .is_superagentinv input").attr("data-valid",""))}),$(".modal .modal-body .is_partner").hide(),$(".modal .modal-body .is_application").hide(),$('.modal .modal-body input[name="related_to"]').on("change",function(){var t=$(this).attr("id");t=="contact"?($(".modal .modal-body .is_partner").hide(),$(".modal .modal-body .is_application").hide(),$(".modal .modal-body .is_contact").show(),$(".modal .modal-body .is_partner select").attr("data-valid",""),$(".modal .modal-body .is_application select").attr("data-valid",""),$(".modal .modal-body .is_contact select").attr("data-valid","required")):t=="partner"?($(".modal .modal-body .is_contact").hide(),$(".modal .modal-body .is_application").hide(),$(".modal .modal-body .is_partner").show(),$(".modal .modal-body .is_contact select").attr("data-valid",""),$(".modal .modal-body .is_application select").attr("data-valid",""),$(".modal .modal-body .is_partner select").attr("data-valid","required")):t=="application"?($(".modal .modal-body .is_contact").hide(),$(".modal .modal-body .is_partner").hide(),$(".modal .modal-body .is_application").show(),$(".modal .modal-body .is_contact select").attr("data-valid",""),$(".modal .modal-body .is_partner select").attr("data-valid",""),$(".modal .modal-body .is_application select").attr("data-valid","required")):($(".modal .modal-body .is_contact").hide(),$(".modal .modal-body .is_partner").hide(),$(".modal .modal-body .is_application").hide(),$(".modal .modal-body .is_contact input").attr("data-valid",""),$(".modal .modal-body .is_partner input").attr("data-valid",""),$(".modal .modal-body .is_application input").attr("data-valid",""))}),$("#agenttype input#super_agent").on("click",function(){$(this).is(":checked")?$("#office_income_share .is_super_agent").show():$("#office_income_share .is_super_agent").hide()}),$("#agenttype input#sub_agent").on("click",function(){$(this).is(":checked")?$("#office_income_share .is_sub_agent").show():$("#office_income_share .is_sub_agent").hide()}),$('#internal select[name="source"]').on("change",function(){var t=$(this).val();t=="Sub Agent"?($("#internal .is_subagent").show(),$("#internal .is_subagent select").attr("data-valid","required")):($("#internal .is_subagent").hide(),$("#internal .is_subagent select").attr("data-valid",""))}),$(".card .card-body .grid_data").hide(),$(".card .card-body .document_layout_type a.list").on("click",function(){$(".card .card-body .document_layout_type a").removeClass("active"),$(this).addClass("active"),$(".card .card-body .grid_data").hide(),$(".card .card-body .list_data").show()}),$(".card .card-body .document_layout_type a.grid").on("click",function(){$(".card .card-body .document_layout_type a").removeClass("active"),$(this).addClass("active"),$(".card .card-body .list_data").hide(),$(".card .card-body .grid_data").show()}),typeof $.fn.select2<"u"&&($(".js-data-example-ajax-check").on("select2:select",function(t){var e=t.params.data;console.log(e),$("#utype").val(e.status)}),$(".js-data-example-ajax-check").select2({multiple:!0,closeOnSelect:!1,dropdownParent:$("#checkinmodal"),ajax:{url:site_url+"/admin/clients/get-recipients",dataType:"json",processResults:function(t){return{results:t.items}},cache:!0},templateResult:l,templateSelection:d}));function l(t){if(t.loading)return t.text;var e=$("<div  class='select2-result-repository ag-flex ag-space-between ag-align-center'><div  class='ag-flex ag-align-start'><div  class='ag-flex ag-flex-column col-hr-1'><div class='ag-flex'><span  class='select2-result-repository__title text-semi-bold'></span>&nbsp;</div><div class='ag-flex ag-align-center'><small class='select2-result-repository__description'></small ></div></div></div><div class='ag-flex ag-flex-column ag-align-end'><span class='select2resultrepositorystatistics'></span></div></div>");return e.find(".select2-result-repository__title").text(t.name),e.find(".select2-result-repository__description").text(t.email),t.status=="Archived"?e.find(".select2resultrepositorystatistics").append('<span class="ui label  select2-result-repository__statistics">'+t.status+"</span>"):e.find(".select2resultrepositorystatistics").append('<span class="ui label yellow select2-result-repository__statistics">'+t.status+"</span>"),e}function d(t){return t.name||t.text}})}n(),$(document).ready(function(){document.getElementById("countbell_notification")&&document.getElementById("countbell_notification").parentNode.addEventListener("click",function(l){window.location="/admin/all-notifications"}),setInterval(function(){},12e4)})})();
